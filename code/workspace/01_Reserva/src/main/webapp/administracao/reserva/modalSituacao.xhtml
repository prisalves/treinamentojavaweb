<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:sp="http://www.springframework.org/tags">

	<!-- MODAL -->
	<b:modal id="modalReservaSituacao" title="Reserva" styleClass="fade" 
		close-on-escape="false" closable="true" backdrop="false">
		<h:form styleClass="form-horizontal row-border" id="formReserva">

			<!-- MENSAGENS -->
			<p:messages id="messagesReserva" globalOnly="false"
				autoUpdate="false" showDetail="false" closable="true"
				showIcon="false" showSummary="true" />
				
			<!-- CLIENTE -->
			<b:panelGrid colSpans="2,5,5" size="sm">
				<h:outputLabel value="Cliente:" styleClass="control-label" />
				<p:selectOneMenu style="margin-top: 4px;width:100%;" appendTo="@(this)" filter="true" 
				 converter="#{componentConverterPessoa}" filterMatchMode="contains" id="cliente"
				 required="true" requiredMessage="Cliente: Campo obrigatório!"
					value="#{reservaService.reserva.cliente}" >
		            <f:selectItem itemLabel="Selecione" itemValue="" />
		            <f:selectItems value="#{pessoaService.listaClientes()}" var="select" 
							itemLabel="#{select.nome}" itemValue="#{select}" />
		        </p:selectOneMenu>
				<p:commandButton icon="fa fa-share-square-o" value="ADD CLIENTE"
					action="#{pessoaService.addCliente}" process="@this" 
					styleClass="noui zoom btn btn-primary btn-xs" />
			</b:panelGrid>	


			<!-- QUANTIDADE PESSOAS -->
			<div class="form-inline" style="margin-bottom: 10px;">
				<div class="form-group">
					<h:panelGrid columns="2">
						<h:outputLabel value="Quantidade adultos:"
							styleClass="control-label" />
						<h:panelGroup layout="block" style="margin-right:10px;">
							<p:spinner style="margin-left: 10px; margin-top: 4px;" size="2"
								min="1" max="50"
								value="#{reservaService.reserva.quantidadeAdulto}" />
						</h:panelGroup>
					</h:panelGrid>
				</div>
				<div class="form-group">
					<h:panelGrid columns="2">
						<h:outputLabel value="Quantidade crianças:"
							styleClass="control-label" />
						<h:panelGroup layout="block">
							<p:spinner style="margin-left: 10px; margin-top: 4px;" size="2"
								min="0" max="100"
								value="#{reservaService.reserva.quantidadeCrianca}" />
						</h:panelGroup>
					</h:panelGrid>
				</div>
			</div>
			
			<!-- COM ANIMAL / COM VAGA -->
			<div class="form-inline" style="margin-bottom: 10px;">
				<div class="form-group">
					<h:panelGrid columns="2">
						<h:outputLabel value="Com animal:" styleClass="control-label" />
						<h:panelGroup layout="block" style="margin-right:10px;">
							<p:selectBooleanCheckbox style="margin: 6px 0px 0px 10px;" value="#{reservaService.reserva.comAnimal}" />
						</h:panelGroup>
					</h:panelGrid>
				</div>
				<div class="form-group">
					<h:panelGrid columns="2">
						<h:outputLabel value="Com vaga:" styleClass="control-label" />
						<h:panelGroup layout="block" style="margin-right:10px;">
							<p:selectBooleanCheckbox style="margin: 6px 0px 0px 10px;" value="#{reservaService.reserva.comVaga}" />
						</h:panelGroup>
					</h:panelGrid>
				</div>
			</div>
			
			<!-- PRETENCAO INICIO -->
			<b:panelGrid colSpans="4,8" size="sm">
				<h:outputLabel value="Pretenção inicial:" styleClass="control-label" />
				<p:calendar styleClass="datetimepicker1" id="pretencaoInicio" mask="true" 
				required="true" requiredMessage="Data inicio: Campo obrigatório!" 
					mindate="#{reservaService.pretencaoInicio}" locale="pt"
					value="#{reservaService.reserva.dataPretencaoInicio}" pattern="dd/MM/yyyy HH:mm" >
					<ui:remove>
						<!-- <p:ajax event="dateSelect" update="pretencaoFim" listener="#{reservaService.ajustaData}" /> -->
					</ui:remove>  
				</p:calendar>
			</b:panelGrid>
			
			<!-- PRETENCAO FIM -->
			<b:panelGrid colSpans="4,8" size="sm">
				<h:outputLabel value="Pretenção final:" styleClass="control-label" />
				<p:calendar styleClass="datetimepicker2" id="pretencaoFim" mask="true" locale="pt" lang="pt"
				required="true" requiredMessage="Data fim: Campo obrigatório!"
					mindate="#{reservaService.reserva.dataPretencaoInicio}" pattern="dd/MM/yyyy HH:mm" 
					value="#{reservaService.reserva.dataPretencaoFim}"  />
			</b:panelGrid>
			
		
			<!-- SUBMIT -->
			<b:row style="text-align:right;margin:0 10px;">
				<p:commandButton value="Enviar" icon="fa fa-thumbs-up"
					action="#{reservaService.saveOrUpdate}" update="messagesReserva"
					styleClass="noui zoom btn btn-success" />
			</b:row>
		</h:form>
		<!-- FIM FORM -->
	</b:modal>
	<!-- FIM MODAL -->
	
	

</ui:composition>